(this["webpackJsonpshootcast-app"]=this["webpackJsonpshootcast-app"]||[]).push([[0],{32:function(t,e,n){},33:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n(1),r=n.n(s),c=n(23),i=n.n(c),o=(n(32),n(26)),l=n(17),u=n(13),d=n(2),h=n(3),j=n(5),b=n(4),p=n(11),O=n(6),m=r.a.createContext({lists:[],cities:[],onAddCity:function(){},onDeleteCity:function(){},onAddList:function(){},onDeleteList:function(){},onSignOut:function(){}}),f=(n(33),function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"nav",children:[Object(a.jsx)(p.b,{to:"/home",children:"Home"}),Object(a.jsx)("p",{onClick:this.context.onSignOut,children:"Sign Out"})]})}}]),n}(s.Component));f.contextType=m;var x=f,v={API_ENDPOINT:"https://vast-savannah-34745.herokuapp.com",API_KEY:"9e87c427393cb8c3e29a65c2b58db7a3"},y=(n(39),function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).addList=function(e){fetch("".concat(v.API_ENDPOINT,"/api/lists"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:e})}).then((function(t){return t.json()})).then((function(e){t.context.onAddList(e)})).catch((function(t){console.log(t)}))},t.onSubmit=function(e){e.preventDefault(),t.addList(e.target.inputList.value)},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"addlist",children:Object(a.jsxs)("form",{className:"addlist-form",onSubmit:this.onSubmit,children:[Object(a.jsx)("label",{htmlFor:"inputList"}),Object(a.jsx)("input",{type:"text",placeholder:"Enter List Name",name:"inputList",id:"inputList",required:!0}),Object(a.jsx)("button",{type:"submit",children:"Add List"})]})})}}]),n}(s.Component));y.contextType=m;var w=y,g=(n(40),function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).handleDelete=function(e){fetch("".concat(v.API_ENDPOINT,"/api/lists/").concat(e),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(t){return t.ok?t:t.json().then((function(t){return Promise.reject(t)}))})).then((function(){t.context.onDeleteList(e)})).catch((function(t){console.log(t)}))},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{className:"sidebar",children:[Object(a.jsx)("h3",{children:"Click to display cities or add a custom list."}),Object(a.jsx)("ul",{children:this.context.lists.map((function(e,n){return Object(a.jsxs)("li",{children:[Object(a.jsx)(p.c,{to:"/lists/".concat(e.id),children:e.name}),Object(a.jsx)("button",{className:"btn",type:"button",onClick:function(){return t.handleDelete(e.id)},children:"x"})]},n)}))}),Object(a.jsx)(w,{})]})}}]),n}(s.Component));g.contextType=m;var C=g,S=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).onSubmit=function(e){e.preventDefault();var n={name:e.target.search.value,list_id:e.target.listId.value};fetch("".concat(v.API_ENDPOINT,"/api/cities"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(e){t.context.onAddCity(e)})).catch((function(t){console.log(t)}))},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"addcity",children:Object(a.jsxs)("form",{className:"addcity-form",onSubmit:this.onSubmit,children:[Object(a.jsx)("p",{children:"Add a City to your List"}),Object(a.jsx)("label",{htmlFor:"search"}),Object(a.jsx)("input",{type:"text",placeholder:"Enter City",name:"search",id:"search",required:!0}),Object(a.jsx)("label",{htmlFor:""}),Object(a.jsx)("select",{id:"listId",name:"listId",children:this.context.lists.map((function(t,e){return Object(a.jsx)("option",{value:t.id,children:t.name},e)}))}),Object(a.jsx)("button",{type:"submit",children:"Add City"})]})})}}]),n}(s.Component);S.contextType=m;var N=S;n(41);var P=function(t){var e;return Object(a.jsxs)("div",{className:"current-weather",children:[Object(a.jsx)("h2",{children:t.wData.name}),0!==t.wData.length?Object(a.jsxs)("div",{children:[Object(a.jsxs)("h1",{children:[Math.round(t.wData.main.temp),"\xb0F"]}),Object(a.jsx)("p",{children:t.wData.weather[0].description}),Object(a.jsxs)("p",{children:[" Sunset: ",(e=t.wData.sys.sunset,new Intl.DateTimeFormat("en-US",{timeStyle:"medium",timeZone:"PST"}).format(new Date(1e3*e)))]})]}):""]})},D=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={city:""},t.onClick=function(){t.props.getNameOnClick(t.props.city.name)},t.handleDelete=function(e){var n=e;fetch("".concat(v.API_ENDPOINT,"/api/cities/").concat(n),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(t){return t.ok?t:t.json().then((function(t){return Promise.reject(t)}))})).then((function(e){t.context.onDeleteCity(n),t.setState({city:e})})).catch((function(t){console.log(t)}))},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsx)("div",{className:"item",children:Object(a.jsxs)("div",{className:"city-item",onClick:function(e){return t.onClick(e)},children:[this.props.city.name,Object(a.jsx)("button",{className:"btn",type:"button",onClick:function(){return t.handleDelete(t.props.city.id)},children:"x"})]})})}}]),n}(s.Component);D.contextType=m;var k=D,A=n(25),E=n.n(A),L=(n(43),function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=new Date,e=1e3*this.props.data.dt;return t.setTime(e),Object(a.jsxs)("div",{className:"weather-display",children:[Object(a.jsx)("div",{className:"current-weather-display",children:E()(t).format("dddd")}),Object(a.jsx)("div",{className:"current-weather-description",children:this.props.data.weather[0].description}),Object(a.jsxs)("h2",{children:[Math.round(this.props.data.main.temp),"\xb0F"]})]})}}]),n}(s.Component)),I=(n(44),function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(d.a)(this,n);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={forecastData:[],weatherData:[],city:""},t.componentDidUpdate=function(e,n){n.city!==t.state.city&&t.fetchWeather(t.state.city)},t.fetchWeather=function(){var e=t.state.city,n="".concat(v.API_KEY),a="&units=imperial",s="".concat("https://api.openweathermap.org/data/2.5/forecast?q=").concat(e,"&appid=").concat(n).concat(a),r="".concat("https://api.openweathermap.org/data/2.5/weather?q=").concat(e,"&appid=").concat(n).concat(a);Promise.all([fetch(s),fetch(r)]).then((function(t){var e=Object(u.a)(t,2),n=e[0],a=e[1];return n.ok?a.ok?Promise.all([n.json(),a.json()]):a.json().then((function(t){return Promise.reject(t)})):n.json().then((function(t){return Promise.reject(t)}))})).then((function(e){var n=Object(u.a)(e,2),a=n[0],s=n[1],r=a.list.filter((function(t){return t.dt_txt.includes("18:00:00")}));t.setState({forecastData:r,weatherData:s})})).catch((function(t){return t.message}))},t.formatForecast=function(){return t.state.forecastData.map((function(t,e){return Object(a.jsx)(L,{data:t},e)}))},t.getNameOnClick=function(e){t.setState({city:e})},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{className:"list",children:[Object(a.jsx)(N,{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"list-cities",children:[Object(a.jsxs)("ul",{children:[Object(a.jsx)("p",{children:"Click a city to view Weather"}),this.props.cities.map((function(e,n){return Object(a.jsx)("li",{children:Object(a.jsx)(k,{id:e.id,value:e.name,city:e,getNameOnClick:t.getNameOnClick})},n)}))]}),Object(a.jsxs)("div",{className:"list-forecast",children:[Object(a.jsx)("div",{className:"city-name",children:Object(a.jsx)(P,{wData:this.state.weatherData})}),Object(a.jsx)("div",{className:"forecast-items",children:""!==this.state.city?this.formatForecast():"Welcome to ShootCast!  Click a city to begin!"})]})]})]})}}]),n}(s.Component));I.contextType=m;var T=I,U=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props.match.params.listId,e=t?this.context.cities.filter((function(e){return e.list_id===parseInt(t)})):this.context.cities;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x,{}),Object(a.jsx)(C,{}),Object(a.jsx)(T,{cities:e})]})}}]),n}(s.Component);U.contextType=m;var F=U,R=(n(45),function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={username:"",password:"",isError:!1},t.onUserChange=function(e){t.setState({username:e.target.value})},t.onPassChange=function(e){t.setState({password:e.target.value})},t.onSubmit=function(e){e.preventDefault(),t.props.handleLogin(t.state.username,t.state.password)||t.setState({isError:!0})},t}return Object(h.a)(n,[{key:"render",value:function(){return this.props.authedUser?Object(a.jsx)(O.a,{to:"/home"}):Object(a.jsxs)("div",{className:"landing-page",children:[Object(a.jsx)("h1",{children:"Welcome to the ShootCast App"}),Object(a.jsx)("p",{children:"In a world of varying climates and back-to-back creative shoots, a way to keep in the know of current weather situations is a must."}),Object(a.jsx)("p",{children:"ShootCast is an app that will help you do so and create custom lists of cities to see the weather conditions with the click of a mouse."}),Object(a.jsx)("p",{children:"Find out the current weather forecast and plan your shoot correctly."}),this.state.isError&&Object(a.jsx)("div",{children:" Username/Password incorrect "}),Object(a.jsx)("form",{onSubmit:this.onSubmit,children:Object(a.jsxs)("div",{className:"landing-container",children:[Object(a.jsx)("label",{htmlFor:"username",children:Object(a.jsx)("b",{children:"Username"})}),Object(a.jsx)("input",{type:"text",placeholder:"Enter Username",name:"username",onChange:this.onUserChange,required:!0}),Object(a.jsx)("label",{htmlFor:"password",children:Object(a.jsx)("b",{children:"Password"})}),Object(a.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",onChange:this.onPassChange,required:!0}),Object(a.jsx)("button",{type:"submit",children:"Login"})]})}),"or",Object(a.jsx)("br",{}),Object(a.jsx)(p.b,{to:"/registration",children:Object(a.jsx)("button",{children:"Register"})})]})}}]),n}(s.Component)),_=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={username:"",password:"",repeatPassword:"",isError:!1,isSuccess:!1},t.onUsernameChange=function(e){t.setState({username:e.target.value})},t.onPasswordChange=function(e){t.setState({password:e.target.value})},t.onRepeatPasswordChange=function(e){t.setState({repeatPassword:e.target.value})},t.onSubmit=function(e){return e.preventDefault(),t.state.password!==t.state.repeatPassword?t.setState({isError:"Passwords do not match!"}):t.props.handleRegistration(t.state.username,t.state.password)?void t.setState({isSuccess:!0,isError:!1}):t.setState({isError:"Username already taken!"})},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsx)("form",{onSubmit:this.onSubmit,children:Object(a.jsx)("fieldset",{children:Object(a.jsxs)("div",{className:"reg-container",children:[Object(a.jsx)("h1",{children:"Register"}),Object(a.jsx)("p",{children:"Please fill in this form to create an account."}),this.state.isError&&Object(a.jsx)("div",{children:this.state.isError}),this.state.isSuccess&&Object(a.jsxs)("div",{children:["User created! ",Object(a.jsx)(p.b,{to:"/",children:"Click here to login!"})]}),Object(a.jsx)("label",{htmlFor:"username",children:Object(a.jsx)("b",{children:"Username"})}),Object(a.jsx)("input",{type:"text",placeholder:"Enter Username",name:"username",id:"username",onChange:this.onUsernameChange,required:!0}),Object(a.jsx)("label",{htmlFor:"password",children:Object(a.jsx)("b",{children:"Password"})}),Object(a.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",id:"password",onChange:this.onPasswordChange,required:!0}),Object(a.jsx)("label",{htmlFor:"password-repeat",children:Object(a.jsx)("b",{children:"Repeat Password"})}),Object(a.jsx)("input",{type:"password",placeholder:"Repeat Password",name:"password-repeat",id:"password-repeat",onChange:this.onRepeatPasswordChange,required:!0}),Object(a.jsx)("button",{type:"submit",className:"registerbtn",children:"Register"}),Object(a.jsx)(p.b,{children:Object(a.jsx)("button",{type:"button",className:"cancelbtn",children:"Cancel"})})]})})})}}]),n}(s.Component),q=(n(46),[{id:1,username:"Mike",password:"pass123"},{id:2,username:"test",password:"pass123"}]),W=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={cities:[],lists:[],authedUser:!1,users:q,response:{}},t.componentDidMount=function(){var e=v.API_ENDPOINT,n="".concat(e,"/api/lists"),a="".concat(e,"/api/cities");Promise.all([fetch(n),fetch(a)]).then((function(t){var e=Object(u.a)(t,2),n=e[0],a=e[1];return n.ok?a.ok?Promise.all([n.json(),a.json()]):a.json().then((function(t){return Promise.reject(t)})):n.json().then((function(t){return Promise.reject(t)}))})).then((function(e){var n=Object(u.a)(e,2),a=n[0],s=n[1];t.setState({lists:a,cities:s})})).catch((function(t){return t.message}))},t.handleDeleteList=function(e){var n=t.state.lists.filter((function(t){return t.id!==e}));t.setState({lists:n})},t.handleAddList=function(e){t.setState({lists:[].concat(Object(l.a)(t.state.lists),[e])})},t.handleDeleteCity=function(e){var n=t.state.cities.filter((function(t){return t.id!==e}));t.setState({cities:n})},t.handleAddCity=function(e,n){t.setState({cities:[].concat(Object(l.a)(t.state.cities),[{cityName:e,listId:n}])})},t.handleLogin=function(e,n){var a=t.state.users.find((function(t){return t.username.toLowerCase()===e.toLowerCase()}));return!(!a||a.password!==n)&&(t.setState({authedUser:a}),!0)},t.handleSignOut=function(){t.setState({authedUser:!1})},t.handleRegistration=function(e,n){if(t.state.users.find((function(t){return t.username.toLowerCase()===e.toLowerCase()})))return!1;var a=[].concat(Object(l.a)(t.state.users),[{username:e,password:n}]);return t.setState({users:a}),!0},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this,e=this.state,n=e.cities,s=e.lists,r=e.authedUser,c={lists:s,cities:n,onAddCity:this.handleAddCity,onDeleteCity:this.handleDeleteCity,onSignOut:this.handleSignOut,onAddList:this.handleAddList,onDeleteList:this.handleDeleteList};return Object(a.jsx)(m.Provider,{value:c,children:Object(a.jsx)("main",{className:"App",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(p.a,{children:Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{path:["/home","/lists/:listId"],render:function(e){return r?Object(a.jsx)(F,Object(o.a)({cities:n,response:t.state.response},e)):Object(a.jsx)(O.a,{to:"/"})}}),Object(a.jsx)(O.b,{path:"/registration",render:function(){return Object(a.jsx)(_,{handleRegistration:t.handleRegistration})}}),Object(a.jsx)(O.b,{render:function(){return Object(a.jsx)(R,{handleLogin:t.handleLogin,authedUser:r})}})]})})})})})}}]),n}(s.Component);i.a.render(Object(a.jsx)(W,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.d7f56c8a.chunk.js.map